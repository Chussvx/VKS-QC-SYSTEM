<!-- Modal_UserCredentials.html - Show generated credentials after user creation or password reset -->
<template id="modal-user-credentials">
    <div class="modal-card" style="max-width: 480px; width: 100%;">
        <!-- Header -->
        <div class="modal-header">
            <div class="flex items-center gap-3">
                <div class="p-2 bg-emerald-100 text-emerald-600 rounded-lg">
                    <span class="material-symbols-outlined">key</span>
                </div>
                <div>
                    <h3 class="font-semibold text-lg" id="cred-modal-title">User Credentials</h3>
                    <p class="text-xs text-muted" id="cred-modal-desc">Save these credentials — they won't be shown
                        again</p>
                </div>
            </div>
            <button class="modal-close-btn" onclick="closeModal()">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>

        <!-- Body -->
        <div class="modal-body p-6">
            <!-- Warning -->
            <div class="mb-4"
                style="background: rgba(245,158,11,0.08); border: 1px solid rgba(245,158,11,0.2);
                border-radius: 10px; padding: 12px 14px; font-size: 13px; display: flex; align-items: flex-start; gap: 10px;">
                <span class="material-symbols-outlined"
                    style="font-size: 18px; color: var(--warning); flex-shrink: 0; margin-top: 1px;">warning</span>
                <span style="color: var(--text-secondary);" data-i18n="auth.cred.warning">Please save this password now.
                    For security, it cannot be retrieved later. The admin can only generate a new password.</span>
            </div>

            <!-- Login Email -->
            <div class="mb-3">
                <label class="form-label text-xs uppercase text-muted font-bold" data-i18n="auth.cred.login_email">Login
                    Email</label>
                <div class="flex items-center gap-2">
                    <input type="text" id="cred-email" class="form-input w-full" readonly
                        style="background: var(--bg-secondary); font-family: monospace;">
                    <button class="btn btn-secondary btn-sm" onclick="copyCredField('cred-email')" title="Copy">
                        <span class="material-symbols-outlined" style="font-size: 16px;">content_copy</span>
                    </button>
                </div>
            </div>

            <!-- Password -->
            <div class="mb-1">
                <label class="form-label text-xs uppercase text-muted font-bold"
                    data-i18n="auth.cred.password">Password</label>
                <div class="flex items-center gap-2">
                    <input type="text" id="cred-password" class="form-input w-full" readonly
                        style="background: var(--bg-secondary); font-family: monospace; font-size: 16px; font-weight: 700; letter-spacing: 1px;">
                    <button class="btn btn-secondary btn-sm" onclick="copyCredField('cred-password')" title="Copy">
                        <span class="material-symbols-outlined" style="font-size: 16px;">content_copy</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="modal-footer">
            <button class="btn btn-primary" onclick="closeModal()">
                <span class="material-symbols-outlined" style="font-size: 18px;">check_circle</span>
                <span data-i18n="auth.cred.done">I've Saved the Credentials</span>
            </button>
        </div>
    </div>
</template>

<script>
    function copyCredField(fieldId) {
        var input = document.getElementById(fieldId);
        if (!input) return;
        navigator.clipboard.writeText(input.value).then(function () {
            showToast('Copied to clipboard!', 'success');
        }).catch(function () {
            input.select();
            document.execCommand('copy');
            showToast('Copied!', 'success');
        });
    }

    function showCredentials(email, password, title) {
        // Open modal FIRST — this clones the template into the DOM
        openModal('user-credentials');
        // Now the elements exist in the DOM — set values
        setTimeout(function () {
            var emailField = document.getElementById('cred-email');
            var pwdField = document.getElementById('cred-password');
            var titleEl = document.getElementById('cred-modal-title');
            if (emailField) emailField.value = email || '';
            if (pwdField) pwdField.value = password || '';
            if (titleEl && title) titleEl.textContent = title;
        }, 50);
    }
</script>